// Generated by CoffeeScript 1.8.0
(function() {
  require(["underscore", "jquery", "canvas/Painter", "mousewheel"], function(_, $, Painter) {
    return $(function() {
      var $window, debounce, painter, resize, started, url, viewport;
      debounce = _.debounce;
      painter = new Painter("image", "draw", "position");
      url = "http://upload.wikimedia.org/wikipedia/commons/9/99/Leonardo_Sala_delle_Asse_detail.jpg";
      painter.showImage(url, 804, 1031);
      painter.setName("PlayerOne");
      painter.setTool({
        tool: "pen",
        color: "red",
        size: 3
      });
      viewport = $('#viewport');
      $window = $(window);
      started = false;
      resize = function() {
        painter.resize(viewport.width(), viewport.height());
        return painter.fit();
      };
      resize();
      $window.on("resize", debounce(resize, 200));
      viewport.on("mousedown", function(e) {
        if (!started) {
          started = true;
          painter.beginPath();
          return painter.setPoint(painter.absolutePoint({
            x: e.pageX,
            y: e.pageY
          }));
        }
      });
      viewport.on("mousemove", function(e) {
        return painter.setPoint(painter.absolutePoint({
          x: e.pageX,
          y: e.pageY
        }));
      });
      $window.on("mouseup", function(e) {
        if (started) {
          started = false;
          painter.setPoint(painter.absolutePoint({
            x: e.pageX,
            y: e.pageY
          }));
          return painter.endPath();
        }
      });
      return viewport.on("mousewheel", function(e) {
        var center, scale;
        scale = e.deltaY > 0 ? 2 : 1 / 2;
        center = painter.absolutePoint({
          x: e.pageX,
          y: e.pageY
        });
        painter.scale(scale, center);
        return painter.setPoint(center);
      });
    });
  });

}).call(this);

//# sourceMappingURL=index.js.map
